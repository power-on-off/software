# Week13 系统详细设计说明书

## （青呱呱记账）

---

| **姓名**  | **学号**  | **学院**   | **班级**  |
| ------------ | ------------ | ------------- | ------------ |
| 苏妍文     | 19334017   | 计算机学院  | 保密管理   |
| 秦一丹     | 19334014   | 计算机学院  | 保密管理   |
| 汪妍       | 19334018   | 计算机学院  | 保密管理   |

**报告日期：2022-05-13**

---

# 1、引言

## 1.1 编写目的

本文是对青呱呱记账APP的概要设计进行描述的文档，说明与之相关的总体设计、接口设计、运行设计、系统数据结构设计和系统出错处理设计等内容。文档预期的读者是项目开发人员，主要是为开发人员提供基本思路，有利于对项目的后续维护。

## 1.2 背景

项目完整名称：青呱呱记账APP

项目提出人员与开发人员：小组内成员3人

项目应用：青呱呱记账APP是一个简洁的，有吸引力的具有记账、事项功能的软件。该APP完全免费，不用于盈利，仅仅作为个人工具使用。且不侵犯个人隐私，所有与用户相关的信息都会储存在用户本地的缓存中，只有进行幸运签功能时才需要与远程服务器进行连接。用以在保证隐私安全的情况下，提高个人生活质量，办事效率。

## 1.3 定义

本文档的术语定义如下表所示

| 术语       | 含义                                           |
| ------------ | ------------------------------------------------ |
| 青呱呱记账 | 本项目开发的软件的名称                         |
| 用户       | 使用该软件的所有人群                           |
| APP        | 安装在智能手机上的软件                         |
| php        | “超文本预处理器”，是在服务器端执行的脚本语言 |
| 日常事项   | 每天固定进行的活动                             |
| 临时事项   | 临时的活动                                     |

## 1.4 参考资料

GB/T 8567-2006 计算机软件文档编制规范

GB/T 8567-1988 计算机软件产品开发文件编制指南

IEEE 1016-2009 - IEEE Standard for Information Technology--Systems Design--Software Design Description

# 2 、 程序系统的结构

## 2.1 管理员部分

### 2.1.1 缓冲区幸运签管理

#### 2.1.1.1  程序描述

用网页的形式展示，使用对象为管理员，用于进行缓冲区数据库里幸运签进行的审核，包括增加幸运签，修改幸运签，查询幸运签，审核幸运签，删除幸运签。

#### 2.1.1.2 功能

1. 添加幸运签。管理员可以自主添加缓冲区里的幸运签，添加的幸运签默认为未审核，需手动审核。
2. 修改幸运签。管理员可以修改缓冲区幸运签里的ID，署名，内容。
3. 查询幸运签。管理员可以查询具有特定字段的幸运签的ID，署名和内容。
4. 审核幸运签。管理员可以审核通过缓冲区里的幸运签，将该条幸运签添加至幸运签数据库据库，并且在缓冲数据库里标记为审核通过。
5. 删除幸运签。管理员可以删除审核不通过的幸运签。

#### 2.1.1.3 性能

管理员需要先登录，才能进行缓冲区幸运签的管理，同时每次功能操作，均会刷新显示缓冲区幸运签数据库里所有幸运签的状态。同时反馈操作结果。

#### 2.1.1.4 输入

输入根据功能选择，包括新增幸运签按钮和幸运签搜索按钮，以及单个幸运签。

1. 查询幸运签。在搜索框输入一段要查询的文字，点击搜索按钮。
2. 添加幸运签。点击新增幸运签按钮，在弹出的页面填写新增缓冲区幸运签的id，署名和内容，点击确认新增。
3. 对于单个幸运签，状态分为两类。第一类是未审核的缓冲区幸运签，具有审核通过，修改，删除三个功能按钮。第二类是审核通过的缓冲区幸运签，此类幸运签不具备操作功能，需要在幸运签数据库模块进行管理。

#### 2.1.1.5 输出

1. 查询幸运签。列表展示检索到的含有特定文字的全部缓冲区幸运签，展示内容包括缓冲区幸运签的ID，署名，内容，以及对应可选的操作。
2. 添加幸运签。返回缓冲区幸运签的新增结果，包括添加失败/添加成功。
3. 未审核的缓冲区幸运签。根据选择的操作，返回未审核的缓冲区幸运签的修改结果，删除结果，以及审核结果。

#### 2.1.1.6 流程逻辑

1. 查询缓冲区幸运签的流程逻辑
   ![1.jpg](/api/users/image?path=8719/images/1653038472157.jpg)
2. 添加幸运签的流程逻辑
   ![2.jpg](/api/users/image?path=8719/images/1653038483306.jpg)
3. 审核幸运签的流程逻辑
   ![3.jpg](/api/users/image?path=8719/images/1653038498223.jpg)
4. 修改、删除幸运签的流程逻辑
   ![4.jpg](/api/users/image?path=8719/images/1653038507468.jpg)

#### 2.1.1.7 限制条件
需要在PC电脑浏览器使用该管理页面，建议使用Chrome浏览器。 

#### 2.1.1.8 尚未解决的问题
用户上传新的幸运签，不需要输入id，id是缓冲幸运签最大的id自增1。当该条的幸运签的被审核通过以后，幸运签被加入到幸运签数据库，这时管理员又将该条删除。当用户上传新的幸运签时，缓冲幸运签的id会与实际的幸运签数据库里的id重合，导致id重复的情况。目前只能靠管理员手动修改id，或者保持缓冲数据库里的最大id与幸运签数据库里最大id相同，保证新添加的id是尚未使用的。


### 2.1.2 幸运签管理

#### 2.1.2.1  程序描述

使用对象为管理员，用于进行幸运签数据库里幸运签进行的管理，包括增加幸运签，修改幸运签，查询幸运签，删除幸运签。

#### 2.1.2.2 功能

1. 添加幸运签。管理员可以自主添加幸运签数据库里的幸运签。
2. 修改幸运签。管理员可以修改幸运签的署名，内容。
3. 查询幸运签。管理员可以查询具有特定字段的幸运签的ID，署名和内容。
4. 删除幸运签。管理员可以删除数据库里的幸运签。

#### 2.1.2.3 性能

管理员需要先登录，才能进行幸运签的管理，同时每次功能操作，均会刷新显示幸运签数据库里所有幸运签的状态。同时反馈操作结果。

#### 2.1.2.4 输入

输入根据功能选择，包括新增幸运签按钮和幸运签搜索按钮，以及单个幸运签。

1. 查询幸运签。在搜索框输入一段要查询的文字，点击搜索按钮。
2. 添加幸运签。点击新增幸运签按钮，在弹出的页面填写新增幸运签的id，署名和内容，点击确认新增。
3. 单个幸运签的操作。具有修改，删除两个功能按钮。

#### 2.1.2.5 输出

1. 查询幸运签。列表展示检索到的含有特定文字的全部幸运签，展示内容包括幸运签的ID，署名，内容，以及对应可选的操作。
2. 添加幸运签。返回幸运签的新增结果，包括添加失败/添加成功。
3. 单个幸运签的操作。具有修改，删除两个功能按钮。根据选择的操作，返回未审核的缓冲区幸运签的修改结果，删除结果。

#### 2.1.2.6 流程逻辑

1. 查询幸运签的流程逻辑
   ![5.jpg](/api/users/image?path=8719/images/1653038521819.jpg)
2. 添加幸运签的流程逻辑
   ![6.jpg](/api/users/image?path=8719/images/1653038529193.jpg)
3. 删除幸运签的流程逻辑
   ![7.jpg](/api/users/image?path=8719/images/1653038535539.jpg)
4. 修改幸运签的流程逻辑
   ![8.jpg](/api/users/image?path=8719/images/1653038543192.jpg)

#### 2.1.2.7 限制条件
需要在PC电脑浏览器使用该管理页面，建议使用Chrome浏览器。 

#### 2.1.2.8 尚未解决的问题
用户上传新的幸运签，不需要输入id，id是缓冲幸运签最大的id自增1。当该条的幸运签的被审核通过以后，幸运签被加入到幸运签数据库，这时管理员又将该条删除。当用户上传新的幸运签时，缓冲幸运签的id会与实际的幸运签数据库里的id重合，导致id重复的情况。目前只能靠管理员手动修改id，或者保持缓冲数据库里的最大id与幸运签数据库里最大id相同，保证新添加的id是尚未使用的。


## 2.2 用户部分

### 2.2.1 记账

#### 2.2.1.1 程序描述

使用者为用户，用于对本地数据库中的记账数据进行操作。

#### 2.2.1.2 功能

1. 查询资产。用户可以·查询当前的剩余资产。
2. 新增记账。用户可以添加数据库里的记账数据。
3. 查询记账。用户可以查询某种记账具体类别的账单列表。
4. 记账分析。用户可以得到对当前记录的账单情况的分析结果。
5. 账单删除。用户可以从数据库中删除某一个账单数据。

#### 2.2.1.3 性能

用户需要先登录才能进行账单的管理，同时每次功能操作，均会刷新显示本地数据库里所有账单的状态，同时反馈操作结果。

#### 2.2.1.4 输入

输入根据功能选择，包括查询资产、新增记账、查询记账、记账分析、账单删除按钮，以及账单数据

1. 查询资产。用户查询当前的剩余资产，点击查询按钮。
2. 新增记账。用户点击新增记账按钮，根据提示输入金额，基本类型（收入/支出），具体类别，时间信息可以自动获取。
3. 查询记账。用户选择记账具体类别，根据提示输入对应参数。
4. 记账分析。对当前记录的账单情况，输入排序方式（正序/倒序）。
5. 账单删除。用户删除某一个账单。

#### 2.2.1.5 输出

1. 查询资产。返回当前资产数。
2. 新增记账。返回新增记账状态（成功/未成功）。
3. 查询记账。返回对应账单列表。
4. 记账分析。并按照类别及总金额用图表展示分析结果。
5. 账单删除。返回删除结果（成功/未成功）。

#### 2.2.1.6 流程逻辑

1. 查询资产的流程逻辑
   ![9.jpg](/api/users/image?path=8719/images/1653038696620.jpg)
2. 新增记账的流程逻辑
   ![10.jpg](/api/users/image?path=8719/images/1653038704743.jpg)
3. 查询记账的流程逻辑
   ![11.jpg](/api/users/image?path=8719/images/1653038719194.jpg)
4. 记账分析的流程逻辑
   ![12.jpg](/api/users/image?path=8719/images/1653038726227.jpg)
5. 账单删除的流程逻辑
   ![13.jpg](/api/users/image?path=8719/images/1653038734723.jpg)

#### 2.2.1.7 限制条件
需要使用安卓智能手机使用该APP页面，建议安卓版本5.1及以上，且需要有修改查看本地文件的权限。 

#### 2.2.1.8 尚未解决的问题
由于技术原因，对账本统计暂未找到性能更高的实现方法。 



### 2.2.2 事项

#### 2.2.2.1 程序描述

使用者为用户，用于对本地数据库中的事项数据进行操作

#### 2.2.2.2 功能

1. 新增事项。用户可以在数据库中新增事项数据。
2. 事项查看。用户可以根据具体类别查找特定事项。返回事项的具体信息。
3. 事项完成。用户根据具体类别查找特定事项并将其状态修改为完成。返回事项状态修改结果（修改成功/未成功）。
4. 查看日完成率。用户可以查询当日的所有临时事项的完成情况。
5. 习惯事项统计。用户可以查询所有习惯事项的完成情况。

#### 2.2.2.3 性能

用户需要先登录才能进行事项的管理，同时每次功能操作，均会刷新显示本地数据库里所有事项的状态。同时反馈操作结果。

#### 2.2.2.4 输入

输入根据功能选择，包括新增事项、事项查看、事项完成、查看日完成率、习惯事项统计按钮，以及事项数据

1. 新增事项。用户点击新增事项按钮，根据提示选择新增事项类型（习惯/临时），并输入对应参数，事项建立时间信息可以自动获取。
2. 事项查看。用户输入具体类别查找特定事项。
3. 事项完成。用户根据具体类别查找特定事项，并将其状态修改为完成。
4. 查看日完成率。用户点击查看日完成率按钮。
5. 习惯事项统计。用户点击习惯事项统计按钮。

#### 2.2.2.5 输出

1. 新增事项。返回新增事项状态（成功/未成功）
2. 事项查看。返回事项的具体信息。
3. 事项完成。返回事项状态修改结果（修改成功/未成功）。
4. 查看日完成率。返回临时事项状态为已完成的统计结果。
5. 习惯事项统计。返回每个习惯事项的末次完成时间及完成次数的统计结果。

#### 2.2.2.6 流程逻辑

1. 新增事项的流程逻辑
   ![14.jpg](/api/users/image?path=8719/images/1653038763873.jpg)
2. 事项查看的流程逻辑
   ![15.jpg](/api/users/image?path=8719/images/1653038772131.jpg)
3. 事项完成的流程逻辑
   ![16.jpg](/api/users/image?path=8719/images/1653038779333.jpg)
4. 查看日完成率的流程逻辑
   ![17.jpg](/api/users/image?path=8719/images/1653038790059.jpg)
5. 习惯事项统计的流程逻辑
   ![18.jpg](/api/users/image?path=8719/images/1653038798754.jpg)

#### 2.2.2.7 限制条件
需要使用安卓智能手机使用该APP页面，建议安卓版本5.1及以上，且需要有修改查看本地文件的权限。

#### 2.2.2.8 尚未解决的问题
由于技术原因，对事项统计暂未找到性能更高的实现方法。 


### 2.2.3 幸运签

#### 2.2.3.1 程序描述

使用者为用户，用于与幸运签相关的操作。

#### 2.2.3.2 功能

1. 随机获取幸运签。用户可以点击随机获取一份幸运签。
2. 查询幸运签。用户可以查询指定的幸运签。
3. 上传幸运签。用户可以将自己喜欢的文本内容进行上传，上传至缓冲区数据库中，待管理员审核通过就能被他人使用。

#### 2.2.3.3 性能

每次功能操作，均会反馈操作结果。

#### 2.2.3.4 输入

输入根据功能选择，包括随机获取幸运签，查询幸运签与上传幸运签。

1. 随机获取幸运签。没有输入项。
2. 查询幸运签。模糊查询，用户输入幸运签的ID号或者署名或者部分内容，查询幸运签。
3. 上传幸运签。用户需输入幸运签的署名和内容。

#### 2.2.3.5 输出

1. 随机获取幸运签。输出项为幸运签的ID，署名和内容。
2. 查询幸运签。输出项为查询结果的幸运签的ID，署名和内容。
3. 上传幸运签。输出项为请求的结果。

#### 2.2.3.6 流程逻辑

1. 随机获取幸运签的流程逻辑
   ![19.jpg](/api/users/image?path=8719/images/1653038835537.jpg)
2. 查询幸运签的流程逻辑
   ![20.jpg](/api/users/image?path=8719/images/1653038843979.jpg)
3. 上传幸运签的流程逻辑
   ![21.jpg](/api/users/image?path=8719/images/1653038851495.jpg)

#### 2.2.3.7 限制条件
 需要使用安卓智能手机使用该APP页面，建议安卓版本5.1及以上，且与幸运签相关功能需要联网。

#### 2.2.3.8 尚未解决的问题
难以判断每日是否是第一次获取幸运签，无法对获取幸运签的请求进行过滤，即用户可以多次获取幸运签，且每次结果均为随机的。



### 2.2.4 数据

#### 2.2.4.1 程序描述

使用者为用户，用于个人数据相关的操作。

#### 2.2.4.2 功能

1. 导出数据。用户将记账与事项相关的数据进行导出，可以移动存储。
2. 导入数据。用户将记账与事项相关的数据进行导入，可以在更换移动手机时仍然使用曾经的数据。

#### 2.2.4.3 性能

每次功能操作，均会反馈操作结果。

#### 2.2.4.4 输入

输入根据功能选择，包括导出数据，导入数据。

1. 导出数据。输入项为导出的地址。
2. 导入数据。输入项为导入的数据文件。

#### 2.2.4.5 输出

1. 导出数据。输出项为导出情况，以及数据文件。
2. 导入数据。输入项为导入情况。

#### 2.2.4.6 流程逻辑

1. 导出数据的流程逻辑
   ![22.jpg](/api/users/image?path=8719/images/1653038862968.jpg)
2. 导入数据的流程逻辑
   ![23.jpg](/api/users/image?path=8719/images/1653038869135.jpg)
   
#### 2.2.4.7 限制条件
需要使用安卓智能手机使用该APP页面，建议安卓版本5.1及以上，且需要有修改查看本地文件的权限。 

#### 2.2.4.8 尚未解决的问题
数据较为冗余，没有找到更好的压缩方法。
